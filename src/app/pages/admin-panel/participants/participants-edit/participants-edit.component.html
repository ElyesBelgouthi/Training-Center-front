<div class="profile-header">
  <div class="profile-image">
    <img
      *ngIf="imageSrc && !previewImage"
      src="{{ imageSrc }}"
      alt="profile image"
    />
    <img
      *ngIf="!imageSrc && !previewImage"
      src="../../../../assets/images/user-solid.svg"
      alt="profile image"
    />
    <img *ngIf="previewImage" [src]="previewImage" alt="profile image" />
  </div>
  <div class="profile-username">
    <h1>Participant</h1>
  </div>
</div>
<div class="form-container">
  <form
    *ngIf="participantForm"
    class="form"
    [formGroup]="participantForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="form-half">
      <div class="form-flex">
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            class="form-control"
            formControlName="email"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('email')?.valid &&
              participantForm.get('email')?.touched
            "
            >Please enter a valid email</span
          >
        </div>
        <div class="form-group">
          <label for="CIN">CIN</label>
          <input
            type="text"
            id="CIN"
            class="form-control"
            formControlName="CIN"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('CIN')?.valid &&
              participantForm.get('CIN')?.touched
            "
            >Please enter a valid CIN</span
          >
        </div>
      </div>
      <div class="form-flex">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input
            type="text"
            id="firstName"
            class="form-control"
            formControlName="firstName"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('firstName')?.valid &&
              participantForm.get('firstName')?.touched
            "
            >Please enter a valid name</span
          >
        </div>
        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input
            type="text"
            id="lastName"
            class="form-control"
            formControlName="lastName"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('lastName')?.valid &&
              participantForm.get('lastName')?.touched
            "
            >Please enter a valid name</span
          >
        </div>
      </div>
      <div class="form-flex">
        <div class="form-group">
          <label for="phone">Phone Number</label>
          <input
            type="text"
            id="phone"
            class="form-control"
            formControlName="phoneNumber"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('phoneNumber')?.valid &&
              participantForm.get('phoneNumber')?.touched
            "
            >Please enter a valid phone number</span
          >
        </div>
        <div class="form-group">
          <label for="age">Age</label>
          <input
            type="number"
            id="age"
            class="form-control"
            formControlName="age"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('age')?.valid &&
              participantForm.get('age')?.touched
            "
            >Please enter a valid age</span
          >
        </div>
      </div>
      <div class="form-flex">
        <div class="form-group">
          <label for="profilePicture">Change Picture</label>
          <label
            for="profilePicture"
            class="file-label"
            [ngClass]="{
              'invalid-touched':
                !participantForm.get('profilePicture')?.valid &&
                participantForm.get('profilePicture')?.touched
            }"
          >
            <i class="fa-solid fa-image"></i>&nbsp;{{ selectedFileName }}
            <input
              type="file"
              id="profilePicture"
              class="file-input"
              (change)="onFileChange($event)"
            />
          </label>
          <span
            class="form-helper"
            *ngIf="
              participantForm.get('profilePicture')?.hasError('invalidFileType')
            "
          >
            Invalid File Type. Allowed: png, jpeg, jpg, gif.
          </span>
          <span
            class="form-helper"
            *ngIf="
              participantForm.get('profilePicture')?.hasError('sizeExceeded')
            "
          >
            File Size Exceeded. Maximum size allowed is 10 MB.
          </span>
        </div>
        <div class="form-group">
          <label>Gender</label>
          <div class="form-flex">
            <label for="male" class="form-label-radio">
              <input
                type="radio"
                id="male"
                formControlName="gender"
                [value]="'male'"
              />
              Male
            </label>
            <label for="female" class="form-label-radio">
              <input
                type="radio"
                id="female"
                formControlName="gender"
                [value]="'female'"
              />
              Female
            </label>
          </div>
        </div>
      </div>

      <div class="form-flex">
        <div class="form-group">
          <label for="city">City</label>
          <select formControlName="city" id="city">
            <option value="" disabled selected>Select a city</option>
            <option *ngFor="let city of cities" [value]="city">
              {{ city }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <label for="address">Address</label>
          <input
            type="text"
            id="address"
            class="form-control"
            formControlName="address"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('address')?.valid &&
              participantForm.get('address')?.touched
            "
            >Please enter a valid address</span
          >
        </div>
      </div>
    </div>
    <div class="form-half">
      <div class="form-flex">
        <div class="form-group">
          <label for="educationLevel">Highest Education Level</label>
          <select formControlName="highestEducationLevel" id="educationLevel">
            <option value="" disabled selected>Select a level</option>
            <option
              *ngFor="let level of highestEducationLevels"
              [value]="level"
            >
              {{ level }}
            </option>
          </select>
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('highestEducationLevel')?.valid &&
              participantForm.get('highestEducationLevel')?.touched
            "
            >Please select a level</span
          >
        </div>
        <div class="form-group">
          <label for="major">Major</label>
          <select formControlName="major" id="major">
            <option value="" disabled selected>Select a major</option>
            <option *ngFor="let major of majors" [value]="major">
              {{ major }}
            </option>
          </select>
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('major')?.valid &&
              participantForm.get('major')?.touched
            "
            >Please select a major</span
          >
        </div>
      </div>
      <div class="form-flex">
        <div class="form-group">
          <label for="address">Educational Institution</label>
          <input
            type="text"
            id="address"
            class="form-control"
            formControlName="educationalInstitution"
          />
          <span
            class="form-helper"
            *ngIf="
              !participantForm.get('educationalInstitution')?.valid &&
              participantForm.get('educationalInstitution')?.touched
            "
            >Please enter a valid Educational Institution</span
          >
        </div>
        <div class="form-group">
          <label for="occupation">Occupation</label>
          <select id="occupation" formControlName="occupation">
            <option value="" disabled selected>Select an occupation</option>
            <option *ngFor="let occupation of occupations" [value]="occupation">
              {{ occupation }}
            </option>
          </select>
        </div>
      </div>
      <div *ngIf="participantForm.get('occupation')?.value === 'employee'">
        <div class="form-flex">
          <div class="form-group">
            <label for="jobTitle">Job Title</label>
            <select id="jobTitle" formControlName="jobTitle">
              <option value="" disabled selected>Select a job title</option>
              <option *ngFor="let jobTitle of jobTitles" [value]="jobTitle">
                {{ jobTitle }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="employeeDepartment">Employee Department</label>
            <select
              id="employeeDepartment"
              formControlName="employeeDepartment"
            >
              <option value="" disabled selected>Select a department</option>
              <option
                *ngFor="let employeeDepartment of employeeDepartments"
                [value]="employeeDepartment"
              >
                {{ employeeDepartment }}
              </option>
            </select>
          </div>
        </div>
        <div class="form-flex">
          <div class="form-group">
            <label for="companyName">Company Name</label>
            <input
              type="text"
              id="companyName"
              class="form-control"
              formControlName="companyName"
            />
          </div>
        </div>
      </div>
      <div class="form-buttons">
        <button type="submit" class="btn-start btn-save">Save</button>
        <button type="button" class="btn-start btn-reset" (click)="onCancel()">
          Cancel
        </button>
      </div>
    </div>
  </form>
</div>
